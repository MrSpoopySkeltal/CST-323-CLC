<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <title th:text="'GameHub • ' + (${product.title} ?: ${product.name})">GameHub • Product</title> 
</head>

<body th:replace="fragments/layout :: shell(~{::title}, ~{::section})">
	<section>
		<h1 class="title" th:text="${product.title} ?: ${product.name}">Product</h1> 
		<div class="card">
			<div class="pad">
				<img th:src="${product.img} ?: ${product.imageUrl}"                   
				     th:alt="${product.title} ?: ${product.name}">
				<p class="sub" th:text="${product.description}">Description…</p>
				<p class="sub"><span th:text="${product.genre}">Genre</span> • <span
						th:text="${product.platform}">Platform</span> • ⭐ <span th:text="${product.rating}">4.7</span>
				</p>
				<div class="price" style="margin:10px 0;font-weight:900;color:#ff8f8f"
					th:text="${#numbers.formatCurrency(product.price,'USD')}">$59.99</div>

				<form th:action="@{/cart/add}" method="post">
					<input type="hidden" name="productId" th:value="${product.game_id} ?: ${product.id}"/> 
					<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
					<button class="btn"
						style="background:linear-gradient(90deg,var(--accentA),var(--accentB));color:#0b1227">Add to
						Cart</button>
				</form>
			</div>
		</div>

		<h2 class="title" style="font-size:28px;margin-top:28px">Related</h2>
		<div class="grid" style="display:grid;gap:18px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))"
			th:if="${related}">
			<a class="card" th:each="r : ${related}" th:href="@{|/product/${r.id}|}">
				<img class="thumb" th:src="${r.imageUrl}" th:alt="${r.name}"
					style="width:100%;height:140px;object-fit:cover">
				<div class="pad">
					<div class="name" style="font-weight:800" th:text="${r.name}">Name</div>
				</div>
			</a>
		</div>
	</section>
</body>

</html>